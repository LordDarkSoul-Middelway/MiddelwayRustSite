<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MiddelWay | –ì–ª–∞–≤–Ω–∞—è</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Russo+One&display=swap');

:root {
    --main-color: #b84cff;
    --accent-color: #ff4fd8;
}

body {
    margin: 0;
    font-family: 'Russo One', sans-serif;
    background: url('rust-bg.jpg') center/cover no-repeat fixed;
    color: #eaeaea;
    text-shadow: 1px 1px 2px #000;
}
body::before {
    content: "";
    position: fixed;
    top:0; left:0; right:0; bottom:0;
    background: rgba(10,0,20,0.7);
    z-index: -1;
}

header {
    background: linear-gradient(180deg, rgba(25,0,40,0.95), rgba(10,0,20,0.9));
    padding: 25px 0;
    text-align: center;
    border-bottom: 3px solid var(--main-color);
    box-shadow: 0 0 25px rgba(184,76,255,0.3);
}
header h1 { margin:0; color: var(--main-color); letter-spacing:3px; font-size:2.4em; text-shadow:0 0 15px rgba(184,76,255,0.7); }
nav a {
    color: #ccc;
    margin: 0 15px;
    text-decoration:none;
    font-weight:bold;
    transition:0.3s;
}
nav a:hover, nav a.active {
    color: var(--accent-color);
    text-shadow: 0 0 8px var(--accent-color);
}

/* –ö–æ–Ω—Ç–µ–Ω—Ç */
.content {
    max-width: 1000px;
    margin: 60px auto;
    background: rgba(15,0,25,0.85);
    padding: 40px;
    border-radius: 12px;
    border:1px solid rgba(184,76,255,0.3);
    box-shadow:0 0 30px rgba(184,76,255,0.2);
    animation: fadeIn 1.2s ease;
}
@keyframes fadeIn { from{opacity:0; transform:translateY(20px);} to{opacity:1; transform:translateY(0);} }
.content h2 { text-align:center; color: var(--main-color); text-transform: uppercase; letter-spacing:2px; text-shadow:0 0 15px rgba(184,76,255,0.7); }
.content p { line-height:1.6; font-size:1.1em; }
.button {
    display:inline-block; padding:12px 25px; background: var(--accent-color); color:#fff; border-radius:8px; text-decoration:none; font-size:1.1em; box-shadow:0 0 15px rgba(255,79,216,0.5); transition:0.3s;
}
.button:hover { background: var(--main-color); box-shadow:0 0 25px rgba(184,76,255,0.7); }

/* –û–Ω–ª–∞–π–Ω –∏ —Å—Ç–∞—Ç—É—Å */
.status-box, .online-box {
    display:flex;
    justify-content: space-around;
    margin-top: 20px;
    font-size:1.2em;
}
.status-box div, .online-box div {
    background: rgba(40,0,50,0.8);
    padding: 15px 25px;
    border-radius: 10px;
    border:1px solid var(--accent-color);
    text-align:center;
    flex:1;
    margin: 0 10px;
    transition:0.3s;
}
.status-box div:hover, .online-box div:hover {
    box-shadow:0 0 20px var(--accent-color);
    text-shadow:0 0 8px var(--accent-color);
}

/* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Ñ—É—Ç–µ—Ä */
footer {
    width: 100%;
    text-align: center;
    padding: 25px;
    background: rgba(15,0,25,0.9);
    color:#aaa;
    border-top:2px solid rgba(184,76,255,0.3);
    box-sizing: border-box;
}
</style>
</head>
<body>
<header>
    <h1>Rust Server</h1>
    <nav>
        <a href="index.html" class="active">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="news.html">–ù–æ–≤–æ—Å—Ç–∏</a>
        <a href="rules.html">–ü—Ä–∞–≤–∏–ª–∞</a>
        <a href="donate.html">–î–æ–Ω–∞—Ç</a>
        <a href="social.html">–°–æ—Ü—Å–µ—Ç–∏</a>
    </nav>
</header>

<div class="content">
    <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ Rust Server!</h2>
    <p>–£ –Ω–∞—Å —á–µ—Å—Ç–Ω–∞—è –∏–≥—Ä–∞, –∞–∫—Ç–∏–≤–Ω–∞—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —ç–≤–µ–Ω—Ç—ã. –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!</p>
    <a class="button" href="steam://connect/127.0.0.1:28015">–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É</a>

    <h3>–û–Ω–ª–∞–π–Ω –∏–≥—Ä–æ–∫–æ–≤:</h3>
    <div class="online-box">
        <div id="online">üü¢ –û–Ω–ª–∞–π–Ω: –∑–∞–≥—Ä—É–∑–∫–∞...</div>
        <div id="sleeping">üí§ –°–ø—è—Ç: –∑–∞–≥—Ä—É–∑–∫–∞...</div>
        <div id="joining">‚ö° –ó–∞—Ö–æ–¥—è—Ç: –∑–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>

    <h3>–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞:</h3>
    <div class="status-box">
        <div id="server-status">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>
</div>

<footer>
    ¬© 2025 Rust Server | –°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è
</footer>

<script>
async function updateOnline() {
    try {
        const res = await fetch("http://127.0.0.1:28082/api/playerlist?apikey=YOUR_API_KEY");
        const data = await res.json();

        const online = data.Players.filter(p => p.IsConnected && !p.IsSleeping);
        const sleeping = data.Players.filter(p => p.IsSleeping);
        const joining = data.Players.filter(p => !p.IsConnected && !p.IsSleeping);

        document.getElementById("online").innerText = `üü¢ –û–Ω–ª–∞–π–Ω: ${online.length}`;
        document.getElementById("sleeping").innerText = `üí§ –°–ø—è—Ç: ${sleeping.length}`;
        document.getElementById("joining").innerText = `‚ö° –ó–∞—Ö–æ–¥—è—Ç: ${joining.length}`;
    } catch (err) {
        document.getElementById("online").innerText = "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö";
        document.getElementById("sleeping").innerText = "-";
        document.getElementById("joining").innerText = "-";
        console.error(err);
    }
}

async function updateServerStatus() {
    try {
        const res = await fetch("http://127.0.0.1:28082/api/serverstatus?apikey=YOUR_API_KEY"); 
        const data = await res.json();
        let statusText = "‚ùî –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ";

        if(data.Status === "online") statusText = "üü¢ –û–Ω–ª–∞–π–Ω";
        else if(data.Status === "offline") statusText = "üî¥ –û—Ñ—Ñ–ª–∞–π–Ω";
        else if(data.Status === "restart") statusText = "üîÑ –†–µ—Å—Ç–∞—Ä—Ç";

        document.getElementById("server-status").innerText = statusText;
    } catch(err) {
        document.getElementById("server-status").innerText = "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç—É—Å–∞";
        console.error(err);
    }
}

updateOnline();
updateServerStatus();
setInterval(updateOnline, 60000);
setInterval(updateServerStatus, 60000);
</script>
</body>
</html>
